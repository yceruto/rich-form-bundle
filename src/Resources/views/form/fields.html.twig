{% block entity2_select2_widget %}
    {{ form_widget(form, { attr: attr|merge({
        'data-entity2-options': {
            'dynamicParams': entity2.dynamic_params,
        }|json_encode|raw,
        'data-select2-options': {
            'ajax': {
                'url': path('rich_form_entity2_search', { hash: entity2.query_hash }),
                'dataType': 'json',
                'delay': select2.options.ajax.delay,
                'cache': select2.options.ajax.cache,
            },
            'theme': select2.options.theme|default('default'),
            'placeholder': placeholder,
            'allowClear': select2.options.allow_clear,
            'minimumInputLength': select2.options.minimum_input_length,
            'minimumResultsForSearch': select2.options.minimum_results_for_search,
            'escapeMarkup': select2.options.result_template or select2.options.selection_template,
            'templateResult': select2.options.result_template,
            'templateSelection': select2.options.selection_template,
        }|json_encode|raw
    }) }) }}
    <script>$(function () { $('#{{ id }}').entity2() })</script>
{% endblock %}
